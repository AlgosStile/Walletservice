# README.MD

## Описание:
Данное приложение является эмулятором банковской системы, позволяющим пользователю осуществлять операции с балансами игроков.

## Код:
Код состоит из объектов `TransactionType`, `Action`, `Player`, `Transaction`, `PlayerRepository`, `TransactionRepository`, `PlayerService`, `PlayerServiceImpl` и `WalletServiceApplication` вместе с которыми взаимодействует главный исполняемый класс `WalletServiceApplication`.

## Как собрать:

Для сборки приложения необходимо выполнить следующие шаги:

### Используя IntelliJ IDEA:

1. Откройте IntelliJ IDEA.
2. Нажмите на `File` -> `Open`.
3. Найдите и выберите директорию проекта.
4. Теперь IntelliJ IDEA собирает проект автоматически.
5. В случае ошибки или для ручной сборки, перейдите к шагу `Build` -> `Build Project`.

### Используя Maven:

1. Установите Maven, если это еще не сделано.
2. Откройте терминал или командную строку.
3. Напишите и выполните команду `mvn clean package`.

## Как запустить:

### Используя IntelliJ IDEA:

1. В IntelliJ IDEA найти файл `WalletServiceApplication.java`.
2. Кликнуть правой кнопкой мыши на файле -> `Run` -> `Run 'WalletServiceApplication'`.

### Используя командную строку:

1. Перейти к директории проекта, используя командную строку.
2. Воспользуйтесь командой `java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.WalletServiceApplication`.

## Как использовать:

Автоматически появится текстовый интерфейс с пунктами меню для выбора. Выберите нужную вам операцию, следуя инструкциям
в консоли. Выбор осуществляется путем введения соответствующей цифры операции.


## Операции:

1. Регистрация нового игрока.
2. Аутентификация игрока.
3. Баланс.
4. Дебетовая операция по счету.
5. Кредитная операция по счету.
6. История транзакций.
7. Завершение работы игрока.
8. История действий.
9. Выход.

upd. Назначение и функция различных компонентов кода:

1. wallet_service.out.aspect.AuditAspect (Аудит аспект): 
Этот аспект занимается записью всех изменений в контроллерах в уровне 
wallet_service.out.controller. Аннотация @After используется для того, чтобы выполнить код обёртки после выполнения 
конкретного совета.

2. wallet_service.out.aspect.ExecutionTimeAspect (Аспект времени выполнения): Вычисляет время выполнения всех методов 
в контроллерах.

3. wallet_service.out.controller.PlayerController (Контроллер игрока): Оперирует игроками в системе, 
обрабатывает HTTP-запросы на регистрацию, аутентификацию и обновление данных игрока и выход из системы.
Каждый метод обрабатывает определенные HTTP-методы (GET, POST, PUT, DELETE).

4. wallet_service.out.controller.TransactionController (Контроллер транзакций): Оперирует транзакциями в системе, 
обрабатывает HTTP-запросы на создание (дебетовая операция) и изменение (кредитовая операция) транзакций, 
а также получение истории транзакций. Каждый метод обрабатывает определенные HTTP-методы (GET, POST, PUT).

5. wallet_service.out.filter.JwtAuthFilter (Фильтр JWT): Проверяет, что в каждом запросе присутствует 
аутентификационный маркер JWT (JSON Web Token), валидирует аутентификационный маркер и устанавливает 
имя пользователя в атрибутах запроса.

6. wallet_service.out.mapper.PlayerMapper и wallet_service.out.mapper.TransactionMapper (Мапперы): 
Используется для преобразования объектов из DTO (data transfer object) в объекты модели и обратно.
Это упрощает передачу данных между слоями приложения.

7. wallet_service.out.repository.PlayerRepository и wallet_service.out.repository.TransactionRepository (Репозитории):
Это слой, который взаимодействует с базой данных (в данном случае используется in-memory база данных). 
Он управляет операциями вставки, получения, обновления и удаления данных игроков и транзакций.

8. wallet_service.out.service.PlayerServiceImpl (Сервисные слои): Этот слой выражает бизнес-логику приложения. 
Он используется для создания сложных запросов, которые включают в себя взаимодействие нескольких объектов.

9. wallet_service.out.util.JwtProvider (Провайдер JWT): Утилитный класс, предоставляющий функции 
для генерации и проверки JWT.

10. wallet_service.out.controller.HistoryController (Контроллер истории): Контроллер, 
обрабатывающий HTTP-запросы на получение истории действий игрока.

11. ActionDto, PlayerDto, TransactionDto (DTO классы): Объекты, которые передают данные из уровня контроллера 
в уровень сервиса и обратно. Они моделируют данные для передачи между бэкендом и фронтендом.