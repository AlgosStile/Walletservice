# README.MD

## Описание:
Данное приложение является эмулятором банковской системы, позволяющим пользователю осуществлять операции с балансами игроков.

## Код:
Код состоит из объектов `TransactionType`, `Action`, `Player`, `Transaction`, `PlayerRepository`, `TransactionRepository`, `PlayerService`, `PlayerServiceImpl` и `WalletServiceApplication` вместе с которыми взаимодействует главный исполняемый класс `WalletServiceApplication`.

## Как собрать:

Для сборки приложения необходимо выполнить следующие шаги:

### 1. Установите необходимые зависимости в pom.xml!

### 2. Используйте IntelliJ IDEA:

1. Откройте IntelliJ IDEA.
2. Нажмите на `File` -> `Open`.
3. Найдите и выберите директорию проекта.
4. Теперь IntelliJ IDEA собирает проект автоматически.
5. В случае ошибки или для ручной сборки, перейдите к шагу `Build` -> `Build Project`.

### 3. Используйте Maven:

1. Установите Maven, если это еще не сделано.
2. Откройте терминал или командную строку.
3. Напишите и выполните команду `mvn clean package`.

### 4. Используйте PostgreSQL:
1. Установите pgAdmin 4 (server 13 и выше) .
2. Установите соединение с сервером в интегрированной в idea postgreSQL.
3. Все настройки указаны в файле db.properties.

### 5. Используйте Docker:
1. Установите Docker.
2. Запустите командой в терминале `docker-compose up -d`. 
3. Docker создаст 2 контейнера и развернет в своей среде.
4. 1 контейнер будет с PostgreSQL, а во втором будут запущены тесты.
5. Команды: `docker-compose exec tests mvn test` - запускаем тесты внутри контейнера
# `docker-compose down` останавливаем этой командой контейнер.

## Как запустить:

### Используйте IntelliJ IDEA:

1. В IntelliJ IDEA найти файл `WalletServiceApplication.java`.
2. Кликнуть правой кнопкой мыши на файле -> `Run` -> `Run 'WalletServiceApplication'`.

### Используя командную строку:

1. Перейти к директории проекта, используя командную строку.
2. Воспользуйтесь командой `java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.WalletServiceApplication`.

## Как использовать:

Автоматически появится текстовый интерфейс с пунктами меню для выбора. Выберите нужную вам операцию, следуя инструкциям в консоли. Выбор осуществляется путем введения соответствующей цифры операции.


## Операции:

1. Регистрация нового игрока.
2. Аутентификация игрока.
3. Баланс.
4. Дебетовая операция по счету.
5. Кредитная операция по счету.
6. История транзакций.
7. Завершение работы игрока.
8. История действий.
9. Выход.

upd. Onion-архитектура:
* TransactionType.java расположен на уровне controller, поскольку он представляет типы операций начиная с внешнего слоя.
* Transaction.java, Action.java, и Player.java -расположены на уровне model, так как они представляют бизнес объект.
* PlayerService.java и PlayerServiceImpl.java находятся на уровне service, это сервисный слой, обрабатывающий 
  бизнес-логику приложения.
* PlayerRepository.java и TransactionRepository.java находятся на уровне repository, они реализуют операции с BD.
* Основной файл для запуска приложения WalletServiceApplication на самом верхнем уровне.