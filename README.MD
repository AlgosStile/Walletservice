# Wallet Service

Wallet Service - это приложение на основе Spring Framework 
предоставляет возможность управления кошельками игроков и выполнения 
финансовых операций.

## Зависимости

Для запуска и развертывания приложения необходимо иметь установленные следующие зависимости:

- Java 17 или выше
- Spring Boot
- Spring Web
- Spring AOP
- Spring JDBC
- Liquibase
- PostgreSQL
- Docker
- другие зависимости (подробнее см. pom.xml)


## Установка и запуск

1. Склонируйте репозиторий Wallet Service на свою локальную машину.
2. Откройте проект в вашей среде разработки (IDE).
3. Установите все необходимые зависимости.
4. Запустите проект.

## Конфигурация

Для настройки и конфигурации приложения вы можете внести изменения в следующие файлы:

#### `wallet_service.in.config.ServletInitializer`

Данный файл содержит класс `ServletInitializer`, который настраивает конфигурацию Spring Boot.

#### `package org.example.AuditAspect`

Данный файл содержит аспект `AuditAspect`, класс AuditAspect имплементирует аспект для вычисления времени выполнения 
методов и логирования этих данных. Метод auditAndExecutionTimeAdvice выполняет эту работу.

Аннотация @Component от Spring указывает, что этот класс является компонентом и автоматически детектируется 
при сканировании класспаса.

В этом файле производится логирование вызываемого метода и времени его выполнения. Это делается путем фиксации 
времени перед и после выполнения вызываемого метода..

#### `package org.example.LoggingAspect`

Данный файл LoggingAspect представляет конфигурацию логирования и аудита.
Он используется для создания аспекта AuditAspect и включения автоматической проксировки аспектов.

#### `wallet_service.out.controller.PlayerController`

Данный файл содержит контроллер `PlayerController`, который предоставляет API для работы с игроками.

#### `wallet_service.out.controller.TransactionController`

Данный файл содержит контроллер `TransactionController`, который предоставляет API для работы с транзакциями.

#### `wallet_service.out.model.Action`

Данный файл содержит модель `Action`, представляющую действие пользователя.

#### `wallet_service.out.model.Player`

Данный файл содержит модель `Player`, представляющую игрока.

#### `wallet_service.out.model.Transaction`

Данный файл содержит модель `Transaction`, представляющую финансовую транзакцию.

#### `wallet_service.out.repository.ActionRepository`

Данный файл содержит репозиторий `ActionRepository`, предоставляющий доступ к данным о действиях пользователей.

#### `wallet_service.out.repository.PlayerRepository`

Данный файл содержит репозиторий `PlayerRepository`, предоставляющий доступ к данным о игроках.

#### `wallet_service.out.repository.TransactionRepository`

Данный файл содержит репозиторий `TransactionRepository`, предоставляющий доступ к данным о транзакциях.


## Развертывание

Чтобы развернуть приложение Wallet Service, выполните следующие шаги:

1. Скомпилируйте все классы в проекте.
2. Запустите приложение при помощи команды `java -jar wallet-service.jar`.

## Использование

Wallet Service предоставляет следующий API для работы с игроками и транзакциями:

### Игроки

- Получить информацию об игроке:
   - `GET /{username}`: Возвращает информацию об игроке с указанным именем пользователя.

- Создать нового игрока:
   - `POST /`: Создает нового игрока с переданными данными.

- Добавить дебетовую транзакцию игроку:
   - `POST /{username}/debit`: Выполняет дебетовую транзакцию для игрока с указанным именем пользователя и суммой.

- Добавить кредитную транзакцию игроку:
   - `POST /{username}/credit`: Выполняет кредитную транзакцию для игрока с указанным именем пользователя и суммой.

- Получить список действий игрока:
   - `GET /{username}/actions`: Возвращает список действий, выполненных игроком с указанным именем пользователя.

### Транзакции

- Получить информацию о транзакции:
  - `GET /transactions/{transactionId}`: Возвращает информацию о транзакции с указанным идентификатором.

- Получить список всех транзакций игрока:
  - `GET /transactions/player/{username}`: Возвращает список всех транзакций, выполненных игроком с указанным именем пользователя.

- Получить список всех транзакций за определенный период времени:
  - `GET /transactions?startDate={startDate}&endDate={endDate}`: Возвращает список всех транзакций, выполненных в заданном периоде времени.

### Тестирование

- Тестирование проекта производилось c помощью:
- Spring boot test
- Spring integration test
- Mockito
- Junit api

## Контрибьюторы

- [@AlgosStile](https://github.com/AlgosStile/AlgosStile): основной разработчик
- [@AlgosStile](https://github.com/AlgosStile/AlgosStile): тестирование и отладка
- [@user](https://github.com/тут_может_быть_ваше_имя): дизайн интерфейса(в процессе)

## Лицензия

@author Олег Тодор.
